<%!
    public static class WorkOrderFilter {
        private String name = null;
        private String qualification = null;
        private Boolean defaultFilter = null;
        public static WorkOrderFilter getMyWorkOrdersFilter(HelperContext context, String catalogName) {

         StringBuilder qual = new StringBuilder();
            qual.append("'").append(WorkOrder.FIELD_CATALOG).append("'=\""+ catalogName +"\"");
            qual.append(" AND ");
            qual.append("'").append(WorkOrder.FIELD_ASSIGNED_IND_ID).append("'=\"").append(context.getUserName()).append("\"");
            qual.append(" AND ");
            qual.append("'").append(WorkOrder.FIELD_STATUS).append("'!=\"").append("Closed").append("\"");
            qual.append(" AND ");
            qual.append("'").append(WorkOrder.FIELD_STATUS).append("'!=\"").append("Cancelled").append("\"");

            return new WorkOrderFilter("My Work Orders",qual.toString(),false);

        }

        public static WorkOrderFilter getOpenWorkOrdersFilter(HelperContext context, String catalogName) {
            StringBuilder qual = new StringBuilder();
            qual.append("'").append(WorkOrder.FIELD_CATALOG).append("'=\""+ catalogName +"\"");
            qual.append(" AND (");
            qual.append("'").append(WorkOrder.FIELD_STATUS).append("'=\"").append("New").append("\"");
            qual.append(" OR ");
            qual.append("'").append(WorkOrder.FIELD_STATUS).append("'=\"").append("In Progress").append("\"");
            qual.append(" OR ");
            qual.append("'").append(WorkOrder.FIELD_STATUS).append("'=\"").append("Assigned").append("\")");

            return new WorkOrderFilter("Open Work Orders",qual.toString(),true);
        }

        public static WorkOrderFilter getUnassignedWorkOrdersFilter(HelperContext context, String catalogName) {
            StringBuilder qual = new StringBuilder();
            qual.append("'").append(WorkOrder.FIELD_CATALOG).append("'=\""+ catalogName +"\"");
            qual.append(" AND ");
            qual.append("'").append(WorkOrder.FIELD_ASSIGNED_IND_ID).append("'=null");
            qual.append(" AND ");
            qual.append("'").append(WorkOrder.FIELD_STATUS).append("'!=\"").append("Closed").append("\"");
            qual.append(" AND ");
            qual.append("'").append(WorkOrder.FIELD_STATUS).append("'!=\"").append("Cancelled").append("\"");

            return new WorkOrderFilter("Unassigned Work Orders",qual.toString(),false);
        }

        public static WorkOrderFilter getFilterByName(HelperContext context, String name, String catalogName) {
            if (name.equals("My Work Orders")) {
                return getMyWorkOrdersFilter(context, catalogName);
            }
            else if (name.equals("Open Work Orders")) {
                return getOpenWorkOrdersFilter(context, catalogName);
            }
            else if (name.equals("Unassigned Work Orders")) {
                return getUnassignedWorkOrdersFilter(context, catalogName);
            }
            return null;
        }

        public static WorkOrderFilter[] getAllFilters(HelperContext context, String catalogName) {
            return new WorkOrderFilter[] {getMyWorkOrdersFilter(context, catalogName), getUnassignedWorkOrdersFilter(context, catalogName),
                getOpenWorkOrdersFilter(context, catalogName)};
        }
        
        public WorkOrderFilter(String name, String qualification, Boolean defaultFilter) {
            this.name = name;
            this.qualification = qualification;
            this.defaultFilter = defaultFilter;
        }

        public String getName() {return this.name;}
        public String getQualification() {return this.qualification;}
        public Boolean isDefault() {return this.defaultFilter;}
    }
%>
